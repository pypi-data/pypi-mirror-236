"use strict";(self.webpackChunkcognite_jupyterlab_copilot=self.webpackChunkcognite_jupyterlab_copilot||[]).push([[798],{82798:(e,t,n)=>{n.r(t),n.d(t,{CommandIDs:()=>E,aiIcon:()=>f,cogniteCopilotPlugin:()=>_,default:()=>x});var o=n(64859),a=n(5172),i=n(67667),l=n(20152),r=n(3992),c=n(99958),s=n(56271),d=n.n(s),p=n(91878),u=n(14625),g=n(55872),m=n.n(g);const C=({sdk:e,activeCell:t,onClose:n})=>{const[o,a]=(0,s.useState)(""),[i,l]=(0,s.useState)(!1),r=(0,s.useCallback)((e=>{a(e.target.value)}),[a]),{registerFlow:c,runFlow:g}=(0,u.useCopilotContext)(),m=(0,s.useMemo)((()=>new u.CodeGenerateFlow({sdk:e})),[]);(0,s.useEffect)((()=>c({flow:m})),[m,c]);const C=(0,s.useCallback)((e=>{e.preventDefault(),l(!0),g(m,{prompt:o}).then((e=>{t.model.value.text=e.content,n()}))}),[g,o]);return d().createElement(w,null,d().createElement(p.Flex,{direction:"column"},d().createElement(p.Flex,{direction:"row",justifyContent:"space-between"},d().createElement(b,{type:"Code",size:36}),d().createElement("div",{style:{flexGrow:1,marginLeft:8}},d().createElement("form",{onSubmit:C},d().createElement(p.InputExp,{autoFocus:!0,clearable:!0,onChange:r,size:"large",fullWidth:!0,placeholder:"Write a prompt to generate code",value:o})))),d().createElement(p.Flex,{direction:"row",style:{marginTop:16},justifyContent:"space-between"},d().createElement(p.Button,{type:"secondary",size:"large",style:{width:136},onClick:n},"Cancel"),d().createElement(p.Button,{type:"primary",size:"large",style:{color:"#fff",background:!o||i?"#b79df1":"#6F3BE4",width:136},disabled:!o||i,onClick:C},i?"Generating ...":"Generate"))))},w=m().div`
  && {
    width: 312px;
    background: #fff;
    padding: 16px;
    border-radius: 10px;
    box-shadow:
      0px 1px 16px 4px rgba(79, 82, 104, 0.1),
      0px 1px 8px rgba(79, 82, 104, 0.08),
      0px 1px 2px rgba(79, 82, 104, 0.24);
  }
`,b=m()(p.Icon)`
  color: #6f3be4;
  background: #e9e1fb;
  padding: 8px;
  border-radius: 6px;
`,v=({activeCell:e,sdk:t})=>{const[n,o]=(0,s.useState)(!0),[a,i]=(0,s.useState)(!1),l=(0,s.useCallback)((()=>{o(!1),i(!0)}),[o,i]),{right:r,top:c}=(0,s.useMemo)((()=>{const t=e.node.getBoundingClientRect();return{right:window.innerWidth-t.width-t.left+187,top:t.top}}),[e]);return d().createElement("div",{id:"copilot_menu_root",style:{height:"100vh",width:"100vw",pointerEvents:"none"}},n&&d().createElement("div",{id:"copilot_main_menu",style:{position:"absolute",right:r,top:c,pointerEvents:"auto",paddingTop:36}},d().createElement(p.Menu,null,d().createElement(p.Menu.Header,null,"Cognite AI"),d().createElement(p.Menu.Item,{icon:"Code",iconPlacement:"left",onClick:l},"Generate code"),d().createElement(p.Menu.Item,{icon:"Edit",iconPlacement:"left",disabled:!0},"Edit code"),d().createElement(p.Menu.Item,{icon:"LightBulb",iconPlacement:"left",disabled:!0},"Explain code"),d().createElement(p.Menu.Item,{icon:"Bug",iconPlacement:"left",disabled:!0},"Fix code errors"))),a&&d().createElement("div",{id:"copilot_generator_menu",style:{position:"absolute",right:r,top:c,pointerEvents:"auto"}},d().createElement(C,{sdk:t,activeCell:e,onClose:()=>i(!1)})))},h=new URLSearchParams(window.location.search).has("aiDisabled"),f=new l.LabIcon({name:"cognite_jupyterlab_copilot:cognite_icon",svgstr:h?'<svg display="none" pointer-events="none" xmlns="http://www.w3.org/2000/svg">\n</svg>\n':'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<g id="LogoAi">\n<g id="Vector">\n<path d="M7 14C7.3261 14 7.59331 13.7602 7.63859 13.4208C8.08694 10.3982 8.49908 9.97738 11.4067 9.64708C11.7418 9.60635 12 9.32582 12 9.00002C12 8.66968 11.7464 8.3982 11.4112 8.34842C8.52174 7.9457 8.16397 7.59276 7.63859 4.57469C7.57971 4.23984 7.32155 4 7 4C6.6694 4 6.40668 4.23984 6.35236 4.57919C5.91306 7.59731 5.50092 8.01812 2.59782 8.34842C2.25362 8.3937 2 8.66517 2 9.00002C2 9.32582 2.24456 9.5973 2.58877 9.64708C5.48277 10.0588 5.83603 10.4072 6.35236 13.4254C6.42029 13.7647 6.68296 14 7 14Z" fill="url(#paint0_radial_835_8333)"/>\n<path d="M12 6C12.1304 6 12.2373 5.90408 12.2554 5.76833C12.4348 4.55928 12.5996 4.39095 13.7627 4.25883C13.8967 4.24254 14 4.13033 14 4.00001C14 3.86787 13.8986 3.75928 13.7645 3.73937C12.6087 3.57828 12.4656 3.43711 12.2554 2.22987C12.2319 2.09594 12.1286 2 12 2C11.8678 2 11.7627 2.09594 11.7409 2.23167C11.5652 3.43892 11.4004 3.60725 10.2391 3.73937C10.1014 3.75748 10 3.86607 10 4.00001C10 4.13033 10.0978 4.23892 10.2355 4.25883C11.3931 4.42354 11.5344 4.56289 11.7409 5.77014C11.7681 5.90588 11.8732 6 12 6Z" fill="url(#paint1_radial_835_8333)"/>\n</g>\n</g>\n<defs>\n<radialGradient id="paint0_radial_835_8333" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(0.500001 3.5) rotate(39.1304) scale(22.8178)">\n<stop stop-color="#8B5CF6"/>\n<stop offset="1" stop-color="#5E28D9"/>\n</radialGradient>\n<radialGradient id="paint1_radial_835_8333" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(0.500001 3.5) rotate(39.1304) scale(22.8178)">\n<stop stop-color="#8B5CF6"/>\n<stop offset="1" stop-color="#5E28D9"/>\n</radialGradient>\n</defs>\n</svg>\n'});var E;!function(e){e.openCopilotDropdown="jupyterlab:open-copilot-dropdown-menu"}(E||(E={}));const _={id:"cognite_jupyterlab_copilot:button_plugin",autoStart:!0,requires:[a.INotebookTracker,o.IThemeManager],optional:[i.ISettingRegistry],activate:(e,t)=>{h||(e.commands.addCommand(E.openCopilotDropdown,{label:"Copilot",execute:async()=>{const e=await new Promise((e=>{var t;window.addEventListener("message",(t=>{if("object"==typeof t.data&&"token"in t.data&&"baseUrl"in t.data&&"project"in t.data){const{token:n,baseUrl:o,project:a}=t.data;e(new c.CogniteClient({appId:"LLM-hub-server",project:a,baseUrl:o,getToken:async()=>n}))}}),{capture:!1,once:!0}),null===(t=null===window||void 0===window?void 0:window.top)||void 0===t||t.postMessage("getToken","*")}));e.authenticate();const n=(({activeCell:e,sdk:t})=>o.ReactWidget.create(d().createElement("div",{id:"copilot_widget_root",style:{position:"relative",zIndex:100,height:"100vh",width:"100vw",pointerEvents:"none"}},d().createElement(u.Copilot,{showChatButton:!1,sdk:t},d().createElement(v,{activeCell:e,sdk:t})))))({activeCell:t.activeCell,sdk:e});r.Widget.attach(n,document.body);const a=e=>{const t=e.target;t.closest("#copilot_main_menu")||t.closest("#copilot_generator_menu")||(n.dispose(),document.body.removeEventListener("mouseup",a))};document.body.addEventListener("mouseup",a)}}),console.log("JupyterLab extension cognite_jupyterlab_copilot is activated!"))}},x=_}}]);