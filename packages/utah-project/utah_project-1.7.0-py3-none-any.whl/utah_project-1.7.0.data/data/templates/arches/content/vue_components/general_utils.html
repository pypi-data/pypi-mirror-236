<script>

function substitution_parser(input_string) {
    const substitution_parser_regex = /<\!\-\- sub\=\'(.*?)\' \-\-\>/

    var matches = input_string.match(substitution_parser_regex)
    var ret_obj = null
    if (matches!=null) {
        ret_obj = {
            match_string: matches[0],
            path: matches[1]
        }

    }
    return ret_obj
}

function path_parser(input_string) {
    //const path_parser_regex = /^((\/[A-Z,a-z,0-9\_\-]*)*)\/([A-Z,a-z,0-9\_\-]*|(.*?)(\-(aa|ab|ae|af|ak|am|an|ar|as|av|ay|az|ba|be|bg|bi|bm|bn|bo|br|bs|ca|ce|ch|co|cr|cs|cu|cv|cy|da|de|dv|dz|ee|el|en|eo|es|et|eu|fa|ff|fi|fj|fo|fr|fy|ga|gd|gl|gn|gu|gv|ha|he|hi|ho|hr|ht|hu|hy|hz|ia|id|ie|ig|ii|ik|io|is|it|iu|ja|jv|ka|kg|ki|kj|kk|kl|km|kn|ko|kr|ks|ku|kv|kw|ky|la|lb|lg|li|ln|lo|lt|lu|lv|mg|mh|mi|mk|ml|mn|mr|ms|mt|my|na|nb|nd|ne|ng|nl|nn|no|nr|nv|ny|oc|oj|om|or|os|pa|pi|pl|ps|pt|qu|rm|rn|ro|ru|rw|sa|sc|sd|se|sg|si|sk|sl|sm|sn|so|sq|sr|ss|st|su|sv|sw|ta|te|tg|th|ti|tk|tl|tn|to|tr|ts|tt|tw|ty|ug|uk|ur|uz|ve|vi|vo|wa|wo|xh|yi|yo|za|zh|zu)(_(AD|AE|AF|AG|AI|AL|AM|AO|AQ|AR|AS|AT|AU|AW|AX|AZ|BA|BB|BD|BE|BF|BG|BH|BI|BJ|BL|BM|BN|BO|BQ|BR|BS|BT|BV|BW|BY|BZ|CA|CC|CD|CF|CG|CH|CI|CK|CL|CM|CN|CO|CR|CU|CV|CW|CX|CY|CZ|DE|DJ|DK|DM|DO|DZ|EC|EE|EG|EH|ER|ES|ET|FI|FJ|FK|FM|FO|FR|GA|GB|GD|GE|GF|GG|GH|GI|GL|GM|GN|GP|GQ|GR|GS|GT|GU|GW|GY|HK|HM|HN|HR|HT|HU|ID|IE|IL|IM|IN|IO|IQ|IR|IS|IT|JE|JM|JO|JP|KE|KG|KH|KI|KM|KN|KP|KR|KW|KY|KZ|LA|LB|LC|LI|LK|LR|LS|LT|LU|LV|LY|MA|MC|MD|ME|MF|MG|MH|MK|ML|MM|MN|MO|MP|MQ|MR|MS|MT|MU|MV|MW|MX|MY|MZ|NA|NC|NE|NF|NG|NI|NL|NO|NP|NR|NU|NZ|OM|PA|PE|PF|PG|PH|PK|PL|PM|PN|PR|PS|PT|PW|PY|QA|RE|RO|RS|RU|RW|SA|SB|SC|SD|SE|SG|SH|SI|SJ|SK|SL|SM|SN|SO|SR|SS|ST|SV|SX|SY|SZ|TC|TD|TF|TG|TH|TJ|TK|TL|TM|TN|TO|TR|TT|TV|TW|TZ|UA|UG|UM|US|UY|UZ|VA|VC|VE|VG|VI|VN|VU|WF|WS|YE|YT|ZA|ZM|ZW)(_([a-z,A-Z,0-9]*))?))?\.(.*))$/
    const path_parser_regex = /^((\/[^\/,*\.]*)*)(\/(([A-Z,a-z,0-9,\-,\_]*?)((-(([a-z]{2})(_([A-Z]{2}))?(_([a-z,A-Z,0-9]+))?))?(\.(.*)))))?$/

    var matches = input_string.match(path_parser_regex)
    var ret_obj = {}
    var is_folder=false

    // dir 1
    // filename no ext 5
    // locale  8
    // language 9
    // country 11
    // variant 13
    // extension 15

    ret_obj['folder'] = matches[1]
    ret_obj['filename'] = matches[5]
    if (matches[3] == undefined) {
        ret_obj['locale']==null
    } else {
        ret_obj['locale'] = matches[8]
    }
    ret_obj['language'] = matches[9]
    if (ret_obj['language'] == undefined) {
        ret_obj['language']==null
    }
    ret_obj['country'] = matches[11]
    if (ret_obj['country'] == undefined) {
        ret_obj['country']==null
    }
    ret_obj['variant'] = matches[13]
    if (ret_obj['variant'] == undefined) {
        ret_obj['variant']==null
    }
    ret_obj['extension'] = matches[15]
    if (ret_obj['extension'] == null) {
        ret_obj['extension'] = null
        ret_obj['folder'] = input_string
        ret_obj['is_folder'] = true
        ret_obj['non_localized_path'] = input_string
    } else {
        ret_obj['lcase_extension'] = ret_obj['extension'].toLowerCase()
        ret_obj['non_localized_path'] = ret_obj['folder'] + "/" + ret_obj['filename'] + "." + ret_obj['extension']
        ret_obj['is_folder'] = false
    } 


    return ret_obj
}

</script>

